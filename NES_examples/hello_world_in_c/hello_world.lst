ca65 V2.13.3 - (C) Copyright 1998-2012 Ullrich von Bassewitz
Main file   : hello_world.s
Current file: hello_world.s

000000r 1               ;
000000r 1               ; File generated by cc65 v 2.13.3
000000r 1               ;
000000r 1               	.fopt		compiler,"cc65 v 2.13.3"
000000r 1               	.setcpu		"6502"
000000r 1               	.smart		on
000000r 1               	.autoimport	on
000000r 1               	.case		on
000000r 1               	.debuginfo	off
000000r 1               	.importzp	sp, sreg, regsave, regbank, tmp1, ptr1, ptr2
000000r 1               	.macpack	longbranch
000000r 1               	.forceimport	__STARTUP__
000000r 1               	.import		_waitvblank
000000r 1               	.export		_write_string
000000r 1               	.export		_main
000000r 1               
000000r 1               .segment	"RODATA"
000000r 1               
000000r 1               L0001:
000000r 1  48 65 6C 6C  	.byte	$48,$65,$6C,$6C,$6F,$2C,$20,$4E,$45,$53,$21,$00
000004r 1  6F 2C 20 4E  
000008r 1  45 53 21 00  
00000Cr 1               
00000Cr 1               ; ---------------------------------------------------------------
00000Cr 1               ; void __near__ write_string (__near__ unsigned char*)
00000Cr 1               ; ---------------------------------------------------------------
00000Cr 1               
00000Cr 1               .segment	"CODE"
000000r 1               
000000r 1               .proc	_write_string: near
000000r 1               
000000r 1               .segment	"CODE"
000000r 1               
000000r 1               ;
000000r 1               ; *((unsigned char*)0x2006) = 0x20;
000000r 1               ;
000000r 1  A2 00        	ldx     #$00
000002r 1  A9 20        	lda     #$20
000004r 1  8D 06 20     	sta     $2006
000007r 1               ;
000007r 1               ; *((unsigned char*)0x2006) = 0x41;
000007r 1               ;
000007r 1  A2 00        	ldx     #$00
000009r 1  A9 41        	lda     #$41
00000Br 1  8D 06 20     	sta     $2006
00000Er 1               ;
00000Er 1               ; while(*str)
00000Er 1               ;
00000Er 1  A0 01        L0009:	ldy     #$01
000010r 1  20 rr rr     	jsr     ldaxysp
000013r 1  A0 00        	ldy     #$00
000015r 1  20 rr rr     	jsr     ldauidx
000018r 1  D0 03 4C rr  	jeq     L000A
00001Cr 1  rr           
00001Dr 1               ;
00001Dr 1               ; *((unsigned char*)0x2007) = *str;
00001Dr 1               ;
00001Dr 1  A0 01        	ldy     #$01
00001Fr 1  20 rr rr     	jsr     ldaxysp
000022r 1  A0 00        	ldy     #$00
000024r 1  20 rr rr     	jsr     ldauidx
000027r 1  8D 07 20     	sta     $2007
00002Ar 1               ;
00002Ar 1               ; str++;
00002Ar 1               ;
00002Ar 1  A0 01        	ldy     #$01
00002Cr 1  20 rr rr     	jsr     ldaxysp
00002Fr 1  85 rr        	sta     regsave
000031r 1  86 rr        	stx     regsave+1
000033r 1  20 rr rr     	jsr     incax1
000036r 1  A0 00        	ldy     #$00
000038r 1  20 rr rr     	jsr     staxysp
00003Br 1  A5 rr        	lda     regsave
00003Dr 1  A6 rr        	ldx     regsave+1
00003Fr 1               ;
00003Fr 1               ; }
00003Fr 1               ;
00003Fr 1  4C rr rr     	jmp     L0009
000042r 1               ;
000042r 1               ; }
000042r 1               ;
000042r 1  20 rr rr     L000A:	jsr     incsp2
000045r 1  60           	rts
000046r 1               
000046r 1               .endproc
000046r 1               
000046r 1               ; ---------------------------------------------------------------
000046r 1               ; int __near__ main (void)
000046r 1               ; ---------------------------------------------------------------
000046r 1               
000046r 1               .segment	"CODE"
000046r 1               
000046r 1               .proc	_main: near
000046r 1               
000046r 1               .segment	"CODE"
000046r 1               
000046r 1               ;
000046r 1               ; waitvblank(); /* This is found in nes.h */
000046r 1               ;
000046r 1  20 rr rr     	jsr     _waitvblank
000049r 1               ;
000049r 1               ; *((unsigned char*)0x2006) = 0x3F;
000049r 1               ;
000049r 1  A2 00        	ldx     #$00
00004Br 1  A9 3F        	lda     #$3F
00004Dr 1  8D 06 20     	sta     $2006
000050r 1               ;
000050r 1               ; *((unsigned char*)0x2006) = 0x00;
000050r 1               ;
000050r 1  A2 00        	ldx     #$00
000052r 1  A9 00        	lda     #$00
000054r 1  8D 06 20     	sta     $2006
000057r 1               ;
000057r 1               ; *((unsigned char*)0x2007) = 1;
000057r 1               ;
000057r 1  A2 00        	ldx     #$00
000059r 1  A9 01        	lda     #$01
00005Br 1  8D 07 20     	sta     $2007
00005Er 1               ;
00005Er 1               ; *((unsigned char*)0x2006) = 0x3F;
00005Er 1               ;
00005Er 1  A2 00        	ldx     #$00
000060r 1  A9 3F        	lda     #$3F
000062r 1  8D 06 20     	sta     $2006
000065r 1               ;
000065r 1               ; *((unsigned char*)0x2006) = 0x03;
000065r 1               ;
000065r 1  A2 00        	ldx     #$00
000067r 1  A9 03        	lda     #$03
000069r 1  8D 06 20     	sta     $2006
00006Cr 1               ;
00006Cr 1               ; *((unsigned char*)0x2007) = 0x30;
00006Cr 1               ;
00006Cr 1  A2 00        	ldx     #$00
00006Er 1  A9 30        	lda     #$30
000070r 1  8D 07 20     	sta     $2007
000073r 1               ;
000073r 1               ; write_string("Hello, NES!");
000073r 1               ;
000073r 1  A9 rr        	lda     #<(L0001)
000075r 1  A2 rr        	ldx     #>(L0001)
000077r 1  20 rr rr     	jsr     pushax
00007Ar 1  20 rr rr     	jsr     _write_string
00007Dr 1               ;
00007Dr 1               ; *((unsigned char*)0x2005) = 0x00;
00007Dr 1               ;
00007Dr 1  A2 00        	ldx     #$00
00007Fr 1  A9 00        	lda     #$00
000081r 1  8D 05 20     	sta     $2005
000084r 1               ;
000084r 1               ; *((unsigned char*)0x2005) = 0x00;
000084r 1               ;
000084r 1  A2 00        	ldx     #$00
000086r 1  A9 00        	lda     #$00
000088r 1  8D 05 20     	sta     $2005
00008Br 1               ;
00008Br 1               ; *((unsigned char*)0x2001) = 8;
00008Br 1               ;
00008Br 1  A2 00        	ldx     #$00
00008Dr 1  A9 08        	lda     #$08
00008Fr 1  8D 01 20     	sta     $2001
000092r 1               ;
000092r 1               ; while(1);
000092r 1               ;
000092r 1  4C rr rr     L002F:	jmp     L002F
000095r 1               ;
000095r 1               ; return 0;
000095r 1               ;
000095r 1  A2 00        	ldx     #$00
000097r 1  A9 00        	lda     #$00
000099r 1  4C rr rr     	jmp     L0010
00009Cr 1               ;
00009Cr 1               ; }
00009Cr 1               ;
00009Cr 1  60           L0010:	rts
00009Dr 1               
00009Dr 1               .endproc
00009Dr 1               
00009Dr 1               
